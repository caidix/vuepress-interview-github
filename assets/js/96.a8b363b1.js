(window.webpackJsonp=window.webpackJsonp||[]).push([[96],{414:function(t,s,a){"use strict";a.r(s);var n=a(1),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"vue3-题解-qa"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#vue3-题解-qa"}},[t._v("#")]),t._v(" Vue3 题解 QA")]),t._v(" "),s("h3",{attrs:{id:"vue3为何弃用defineproperty"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#vue3为何弃用defineproperty"}},[t._v("#")]),t._v(" "),s("code",[t._v("Vue3")]),t._v("为何弃用"),s("code",[t._v("defineProperty")])]),t._v(" "),s("ol",[s("li",[s("code",[t._v("Object.defineProperty")]),t._v(" 无法低耗费的监听到数组下标的变化，导致通过数组下标添加元素，不能实时响应；举例来说：因为数组的位置不固定，数量多变，正常对象 key 对应 value 一般不会变，但是如果数组删除了某个元素，比如第一个元素被删除或者头部增加一个元素，那么将导致后面所有的 key 对应 value 错位，如果 6 个元素，也就会触发 5 次 set。Vue 将数组的 7 个变异方法进行了重写，也就是更改了 Array 原型上的方法达到劫持变化。")]),t._v(" "),s("li",[s("code",[t._v("Object.defineProperty")]),t._v(" 只能劫持对象的属性，从而需要对每个对象，每个属性进行遍历。如果属性值是对象，还需要深度遍历。 "),s("code",[t._v("Proxy")]),t._v(" 可以劫持整个对象， 并返回一个新的对象。")]),t._v(" "),s("li",[s("code",[t._v("Proxy")]),t._v(" 不仅可以代理对象，还可以代理数组。")]),t._v(" "),s("li",[t._v("可以代理动态增加的属性。")]),t._v(" "),s("li",[t._v("可以监听删除的属性。")]),t._v(" "),s("li",[t._v("监听数组的索引和 length 属性")])]),t._v(" "),s("p",[t._v("Tips： Proxy 虽然是劫持的整个对象，但也是浅层劫持，属性值是对象时同样也需要深度遍历，不然该属性对象的变化也无法监测到。")]),t._v(" "),s("h3",{attrs:{id:"除了使用proxy之外-vue3的快还体现在什么地方"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#除了使用proxy之外-vue3的快还体现在什么地方"}},[t._v("#")]),t._v(" 除了使用"),s("code",[t._v("Proxy")]),t._v("之外，"),s("code",[t._v("Vue3")]),t._v("的快还体现在什么地方？")]),t._v(" "),s("h4",{attrs:{id:"源码体积的优化"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#源码体积的优化"}},[t._v("#")]),t._v(" 源码体积的优化")]),t._v(" "),s("ol",[s("li",[t._v("重写了虚拟 "),s("code",[t._v("dom")])])]),t._v(" "),s("h4",{attrs:{id:"不主动数据劫持"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#不主动数据劫持"}},[t._v("#")]),t._v(" 不主动数据劫持")]),t._v(" "),s("ol",[s("li",[s("code",[t._v("Vue2")]),t._v("里面的数据被劫持，均是"),s("code",[t._v("defineProperty")]),t._v("主动为其添加"),s("code",[t._v("getter\\setter")]),t._v("方法的。"),s("code",[t._v("Vue3")]),t._v("里面的数据劫持均为被动，对数据有操作，其才会被更改为响应式数据。")]),t._v(" "),s("li",[t._v("体现在整个系统上，则起码在初始阶段，系统不会那么繁忙。")])]),t._v(" "),s("h4",{attrs:{id:"代码编译优化"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#代码编译优化"}},[t._v("#")]),t._v(" 代码编译优化")]),t._v(" "),s("ol",[s("li",[t._v("使用了 组合 "),s("code",[t._v("API")]),t._v("来代替 "),s("code",[t._v("vue2")]),t._v(" 中的 "),s("code",[t._v("Options API")])]),t._v(" "),s("li",[t._v("组件内不需要根节点了，使用 "),s("code",[t._v("fragment")]),t._v("(代码片段)代替了，"),s("code",[t._v("fragment")]),t._v("(代码片段)不会在页面显示")]),t._v(" "),s("li",[s("code",[t._v("vue3")]),t._v(" 中标记和提升所有的静态根节点，"),s("code",[t._v("diff")]),t._v(" 的时候只需要对比动态节点内容")])]),t._v(" "),s("h3",{attrs:{id:"composition-api和options-api"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#composition-api和options-api"}},[t._v("#")]),t._v(" "),s("code",[t._v("Composition Api")]),t._v("和"),s("code",[t._v("Options Api")])]),t._v(" "),s("ol",[s("li",[t._v("代码更利于维护和封装；")]),t._v(" "),s("li",[s("code",[t._v("Vue2")]),t._v(" 中,我们会在一个 "),s("code",[t._v("vue")]),t._v("文件的 "),s("code",[t._v("data")]),t._v("，"),s("code",[t._v("methods")]),t._v("，"),s("code",[t._v("computed")]),t._v("，"),s("code",[t._v("watch")]),t._v(" 中定义属性和方法，共同处理页面逻辑 ,一个功能的实现，代码过于分散；")]),t._v(" "),s("li",[s("code",[t._v("vue3")]),t._v(" 中,代码是根据逻辑功能来组织的，一个功能的所有 "),s("code",[t._v("api")]),t._v(" 会放在一起（高内聚，低耦合），提高可读性和可维护性,基于函数组合的 "),s("code",[t._v("API")]),t._v(" 更好的重用逻辑代码；")]),t._v(" "),s("li",[s("code",[t._v("Vue3")]),t._v(" 中用 "),s("code",[t._v("setup")]),t._v(" 函数代替了 "),s("code",[t._v("Vue2")]),t._v(" 中的 "),s("code",[t._v("befareCreate")]),t._v(" 和 "),s("code",[t._v("created")]),t._v("；")]),t._v(" "),s("li",[s("code",[t._v("Vue3")]),t._v(" 中用 "),s("code",[t._v("onUnmounted")]),t._v(" 代替了 "),s("code",[t._v("Vue2")]),t._v(" 中的 "),s("code",[t._v("beforeDestory")]),t._v("；")]),t._v(" "),s("li",[s("code",[t._v("Vue3")]),t._v(" 中用 "),s("code",[t._v("unmounted")]),t._v(" 代替了 "),s("code",[t._v("Vue2")]),t._v(" 中的 "),s("code",[t._v("destroyed")]),t._v("；")])]),t._v(" "),s("h3",{attrs:{id:"proxy相对于object-defineproperty的优点"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#proxy相对于object-defineproperty的优点"}},[t._v("#")]),t._v(" "),s("code",[t._v("Proxy")]),t._v("相对于"),s("code",[t._v("Object.defineProperty")]),t._v("的优点")]),t._v(" "),s("ol",[s("li",[t._v("代码的执行效果更快；")]),t._v(" "),s("li",[s("code",[t._v("Proxy")]),t._v(" 可以直接监听对象而非属性；")]),t._v(" "),s("li",[s("code",[t._v("Proxy")]),t._v(" 可以直接监听数组的变化；")]),t._v(" "),s("li",[s("code",[t._v("Proxy")]),t._v(" 有多达 "),s("code",[t._v("13")]),t._v(" 种拦截方法,不限于 "),s("code",[t._v("apply")]),t._v("、"),s("code",[t._v("ownKeys")]),t._v("、"),s("code",[t._v("deleteProperty")]),t._v("、"),s("code",[t._v("has")]),t._v(" 等等是 "),s("code",[t._v("Object.defineProperty")]),t._v(" 不具备的；")]),t._v(" "),s("li",[s("code",[t._v("Proxy")]),t._v(" 返回的是一个新对象,我们可以只操作新的对象达到目的,而 "),s("code",[t._v("Object.defineProperty")]),t._v(" 只能遍历对象属性直接修改；")]),t._v(" "),s("li",[s("code",[t._v("Proxy")]),t._v(" 不需要初始化的时候遍历所有属性，另外有多层属性嵌套的话，只有访问某个属性的时候，才会递归处理下一级的属性；")])]),t._v(" "),s("h3",{attrs:{id:"vue-3-0-在编译方面有哪些优化"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#vue-3-0-在编译方面有哪些优化"}},[t._v("#")]),t._v(" "),s("code",[t._v("Vue 3.0")]),t._v(" 在编译方面有哪些优化？")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("vue3.x")]),t._v(" 中标记和提升所有的静态节点，"),s("code",[t._v("diff")]),t._v(" 的时候只需要对比动态节点内容")]),t._v(" "),s("li",[s("code",[t._v("Fragments")]),t._v("（升级 "),s("code",[t._v("vetur")]),t._v(" 插件): "),s("code",[t._v("template")]),t._v(" 中不需要唯一根节点，可以直接放文本或者同级标签")]),t._v(" "),s("li",[t._v("静态提升("),s("code",[t._v("hoistStatic")]),t._v("),当使用 "),s("code",[t._v("hoistStatic")]),t._v(" 时,所有静态的节点都被提升到 "),s("code",[t._v("render")]),t._v(" 方法之外.只会在应用启动的时候被创建一次,之后使用只需要应用提取的静态节点，随着每次的渲染被不停的复用")]),t._v(" "),s("li",[s("code",[t._v("patch flag")]),t._v(", 在动态标签末尾加上相应的标记,只有带 "),s("code",[t._v("patchFlag")]),t._v(" 的节点才被认为是动态的元素,会被追踪属性的修改,能快速的找到动态节点,而不用逐个逐层遍历，提高了虚拟 "),s("code",[t._v("dom diff")]),t._v(" 的性能")]),t._v(" "),s("li",[t._v("缓存事件处理函数 "),s("code",[t._v("cacheHandler")]),t._v(",避免每次触发都要重新生成全新的 "),s("code",[t._v("function")]),t._v(" 去更新之前的函数")]),t._v(" "),s("li",[s("code",[t._v("tree shaking")]),t._v(" 通过摇树优化核心库体积,减少不必要的代码量")])]),t._v(" "),s("h3",{attrs:{id:"vue3-中如何进行像-2-x-那样的函数式调用组件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#vue3-中如何进行像-2-x-那样的函数式调用组件"}},[t._v("#")]),t._v(" vue3 中如何进行像 2.X 那样的函数式调用组件")]),t._v(" "),s("blockquote",[s("p",[t._v("这里依旧用 vue2.x 那里的 message 组件类似的写法，重点在于 2 与 3 之间使用的渲染方法的区别。而 vue3 将其核心拆离出来，使用者可以自定义 render 函数生成在不同环境下的代码，如：androd、ios 等。")])]),t._v(" "),s("p",[t._v("Vue3.0 的渲染分为")]),t._v(" "),s("ul",[s("li",[t._v("Render Phase 渲染阶段\n在渲染阶段，将会调用 render 函数，它返回一个虚拟节点")]),t._v(" "),s("li",[t._v("Mount Phase 挂载阶段\n在挂载阶段，会使用虚拟节点，并调用 Dom Api 挂载到 web 上")]),t._v(" "),s("li",[t._v("patch Phase 补丁阶段\n在补丁阶段，渲染器会将旧的虚拟节点和新的虚拟节点（当 reactivity 监听到变化时，会再次调用 render 函数生成新的虚拟节点）进行比较并只更新网页变化的部分")])]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" createVNode"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" render"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" isVNode"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" nextTick "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vue"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" ImageConstructor "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./image.vue"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" vm"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" container"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n * 传参：\n * @param urlList  {若为dom元素，则查找dom元素内所有的image图片，若为数组，则展示数组内的所有图片}\n * @param zIndex {层级}\n * @param emptyError {未找到img控制台提醒}\n * @param activeIndex {当前需要展示的图片路径，没有则默认展示数组第一张, number|string}\n */")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("Image")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token parameter"}},[s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("opts")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" any "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("urlList")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("emptyError")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("activeIndex")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("opts"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("urlList "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("instanceof")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HTMLDocument")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    opts"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("urlList "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Array"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("from")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("opts"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("urlList"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getElementsByTagName")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"img"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("map")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("img")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" img"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("src "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("opts"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("urlList "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("instanceof")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Array")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("opts"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("urlList"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("opts"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("emptyError"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("error")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"所选模块|传入图片数组为空！"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("typeof")]),t._v(" opts"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("activeIndex "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"string"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    opts"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("activeIndex "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" opts"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("urlList"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("findIndex")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("opts"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("activeIndex"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  container "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("createElement")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"div"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  opts"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("close "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" close"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  vm "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("createVNode")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ImageConstructor"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" opts"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("vm"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("vm"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" container"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  document"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("appendChild")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("container"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("close")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" vm"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("nextTick")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    document"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("removeChild")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("container"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" Image"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br"),s("span",{staticClass:"line-number"},[t._v("25")]),s("br"),s("span",{staticClass:"line-number"},[t._v("26")]),s("br"),s("span",{staticClass:"line-number"},[t._v("27")]),s("br"),s("span",{staticClass:"line-number"},[t._v("28")]),s("br"),s("span",{staticClass:"line-number"},[t._v("29")]),s("br"),s("span",{staticClass:"line-number"},[t._v("30")]),s("br"),s("span",{staticClass:"line-number"},[t._v("31")]),s("br"),s("span",{staticClass:"line-number"},[t._v("32")]),s("br"),s("span",{staticClass:"line-number"},[t._v("33")]),s("br"),s("span",{staticClass:"line-number"},[t._v("34")]),s("br"),s("span",{staticClass:"line-number"},[t._v("35")]),s("br"),s("span",{staticClass:"line-number"},[t._v("36")]),s("br"),s("span",{staticClass:"line-number"},[t._v("37")]),s("br"),s("span",{staticClass:"line-number"},[t._v("38")]),s("br"),s("span",{staticClass:"line-number"},[t._v("39")]),s("br"),s("span",{staticClass:"line-number"},[t._v("40")]),s("br"),s("span",{staticClass:"line-number"},[t._v("41")]),s("br"),s("span",{staticClass:"line-number"},[t._v("42")]),s("br"),s("span",{staticClass:"line-number"},[t._v("43")]),s("br"),s("span",{staticClass:"line-number"},[t._v("44")]),s("br"),s("span",{staticClass:"line-number"},[t._v("45")]),s("br"),s("span",{staticClass:"line-number"},[t._v("46")]),s("br"),s("span",{staticClass:"line-number"},[t._v("47")]),s("br"),s("span",{staticClass:"line-number"},[t._v("48")]),s("br"),s("span",{staticClass:"line-number"},[t._v("49")]),s("br"),s("span",{staticClass:"line-number"},[t._v("50")]),s("br"),s("span",{staticClass:"line-number"},[t._v("51")]),s("br")])]),s("blockquote",[s("p",[t._v("在 2x 中其调用方法是挂载在其原型对象上，3x 则给我们提供了指定的挂载路径")])]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 以下app为Vue为实例")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//2x")]),t._v("\napp"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$message "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" xxx"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 3x")]),t._v("\napp"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("config"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("globalProperties"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$message "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" xxx"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br")])]),s("h3",{attrs:{id:"render-函数-2-与-3-的不同"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#render-函数-2-与-3-的不同"}},[t._v("#")]),t._v(" render 函数 2 与 3 的不同")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//2 api")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("h")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("h")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'div'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("attrs")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("id")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'foo'")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("on")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("click")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("xxx\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'hello'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 3 api")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("h"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'vue'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("h")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'div'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("id")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'foo'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("onClick")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("xxx"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'hello'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br")])]),s("p",[t._v("籍此，我们可以看到两者的不同，一是传入的 options 参数完全扁平化开，若组件内有需要的参数将会作为 props 传入，否则将传入 attrs 中。特别的一提：$listener 也在 3.x 版本并入了 attrs 中。第二点是 createVNode 方法不再针对某个组件渲染，而是在 vue 中全局引入{h}。在 2 中，倘若想将一个大型的组件分割成很多个小的组件的时候，你可能必须要将这个 h 函数一路传递给这些分割函数，从而造成了一些麻烦，而全局的引入降低了心智负担。")]),t._v(" "),s("h3",{attrs:{id:"vue3-与-vue2-的不同"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#vue3-与-vue2-的不同"}},[t._v("#")]),t._v(" Vue3 与 Vue2 的不同")]),t._v(" "),s("blockquote",[s("p",[t._v("vue3.0 版本将所有的功能以包的形式分割开来，其中有一个@vue/reactivity 包，里面有 reactive、effect、computed、ref，通过 reactive({haha : 'asdasas'}) 进行了 proxy 代理，通过 effect 为状态，像 react。")])]),t._v(" "),s("ol",[s("li",[s("p",[t._v("Vue3.0 源码有哪几个核心模块组成？\nreactivity 文件中，分别有 effect、reactive、computed、ref、公共常量及依赖收集的模块")])]),t._v(" "),s("li",[s("p",[t._v("Vue3.0 中响应式原理的作用是什么？ 为什么比 Vue2.0 性能高？")])])]),t._v(" "),s("ul",[s("li",[t._v("3。0 中改用了 proxy 进行依赖收集，对对象进行递归劫持，对处理值的变化进行判断。")]),t._v(" "),s("li",[t._v("2。0 的时候是通过 Dep 和 Watcher 进行依赖的收集和分发，3.0 使用了 effect 将视图渲染和数据响应式分离开来。且采用模块化的引入的形式，在不使用某一些功能的时候即不需要引入功能模块，可以减少打包编译的大小和时间。vue3。0 是在使用到当前对象时才初始化代理，而 vue2.0 的响应式是在一开始便用递归重写被代理对象的 Object.defineProperty。")])]),t._v(" "),s("ol",{attrs:{start:"3"}},[s("li",[s("p",[t._v("proxy 和 defineProperty 有什么区别嘛？\n一个是劫持操作，一个是劫持属性。\nproxy 只需要代理了一个对象的 set、get 操作，那么相当于对这个对象的所有子属性做了劫持。\n而 defineProperty 则需要对每一个属性进行遍历然后劫持。因此在 2.x 里，vue 需要对 data 数据进行递归遍历，对 data 数据做深度的 Observer 处理，因此如果传入的 data 是比较深的层级，或者有很多没有用到的数据，都会影响到 vue 的初始化的速度。而 3.x 只需要在对象上做一层代理，而这个对象上就算有很多无需做响应式处理的数据也没关西，因为子对象是否需要被递归代理是在用到的时候才决定的。可以说相比 2.x 基本上没有了 initData 这部分的时间。也无须要通过$set 来添加新属性的监听了。")])]),t._v(" "),s("li",[s("p",[t._v("Vue3 中计算属性为什么要优先于 effect 执行\n因为如果通过 effect 去获取计算属性中的值的时候，计算属性通过 dirty 来进行缓存避免多次计算值的调用。如果计算属性内所需要被监听的值发生了改变，但是 computed.value 并没有被及时的修改，就会导致 effect 出来的值不是最新的值，所以需要优先执行并且将 dirty 设为 true。")])]),t._v(" "),s("li",[s("p",[t._v("Vue3 中计算属性中 dirty 的含义\ndirty 是为了对计算属性的值是否发生变更所做的一个锁，函数内通过识别 dirty 的值来判断是否需要重新运行计算属性中传入的函数/对象 setter。已避免计算属性在 getter 的过程中多次触发执行 effect。")])])])])}),[],!1,null,null,null);s.default=e.exports}}]);