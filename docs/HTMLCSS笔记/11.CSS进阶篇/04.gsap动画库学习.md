---
title: gsap动画库学习笔记 - 持续~
date: 2023-06-05 17:00:00
tags: 
  - CSS
categories: 
  - HTML/CSS
permalink: /pages/7f7024/
---

## 基本使用

1. 注册

```js
  // 注册ScrollTrigger插件，即可以根据滚动条的滚动改变dom的位置/形象。
  gsap.registerPlugin(ScrollTrigger);
```

## Timeline方法

> gsap.to("选择器", 动画执行时间（单位s）, {CSS属性名称:属性值,CSS属性名称:"属性值"}); 其属性内配有相关参数，以满足动画需要：

| 方法 | 描述 |例子|
|:--|:--:|:--:|
| scrollTrigger | 使用了scrollTrigger插件后，可配置scrollTrigger参数 ||
| ease | 动画效果 |expo-out、elastic|
| duration | 持续时间（单位：秒） ||
| delay | 延迟时间（单位：秒） ||
| repeat | 执行次数 ||
| repeatDelay | 延迟时间（单位：秒） ||
| startAt |初始位置 ||

### scrollTrigger参数

![gsap-scrolltrigger](/vuepress-interview-github/assets/css/gsap-scrolltrigger.png)

- toggleClass: 为执行动画的trigger dom上添加类

```js
gsap.to(".demo", {
    x: 500,
    duration: 3
});
```

> 将类名为demo的元素从原有的位置移动到x轴为500px的位置，时间为3秒

```js
gsap.from(".demo", {
    x: 800,
    duration: 3
});
```

> 将类名为demo的元素的初始位置设置为x轴为800px的位置，需要通过to方法告诉其要移动的最终位置

```js
gsap.fromTo(".demo", {
    x: 500,
}, {
    x: 300,
    duration: 3
});
```

> 将类名为demo的元素的从500px的位置匀速移动到300px的位置，该方法是上两种方法的结合。第一个参数也可以是数组，传入多个类名可以实现多个类名绑定动画的效果。
>
> 在调用 gsap 的 to、from 和 fromTo 方法之后，将返回一个 Tween 实例，我们获取到该实例之后，可以通过调用实例上的方法来控制动画的执行。例如：

| 方法 | 描述 |
|:--|:--:|
| pause | 暂停 |
| play | 播放 |
| restart | 重播 |
| paused | 暂停/继续 |
| resume | 恢复 |
| reverse | 反向播放 |
| progress(0.25) | 跳到4分之1处 |
| timeScale(0.5) | 速度减慢 - 或是加快 |
| kill | 删除动画 |

我们可以通过先执行timeline方法来配置scrollTrigger类以控制动画的执行及方法调用, 例如：

```js
let demo = gsap.timeline({
                scrollTrigger: {
                    trigger: ".demo",
                    /*
                     * ⚠ start: 表示动画开始执行节点
                     * ⚠ end: 表示动画执行结束
                     * 参数1: 表示当前这个元素的开始执行动画的起点
                     *      【0：就是当前这个元素的顶端位置】
                     *      【正数：当前这个元素根据顶端位置进行向下偏移】
                     *      【负数：当前这个元素根据顶端位置进行向上偏移】
                     * 
                     * 参数2: 表示当前滚动条的起点执行位置
                     *      【0：浏览器最顶端】
                     *      【正数：向下偏移】
                     *      【负数：向上偏移】
                     * 当两个位置重合时，动画开始执行/结束
                     * 此处的位置可以使用像素单位，完全可以自定义
                     */
                    start: '0% 60%', 
                    end: '100% 10%',  // end 默认是 trigger 离开视口
                    // markers: true,   //绘制开始位置和结束位置的线条
                    scrub: true,       //表示动画可以重复执行改成false表示只执行一次
                    pin: true           //动画执行期间，动画元素不跟随页面进行滚动，动画执行结束后，恢复滚动
                }
            })
            // 时间点触发之后的操作
            demo.from(".demo", 2, {
                x: 800,
                backgroundColor: "#dd6942",
                opacity: 1
            });
            demo.to(".demo", 2, {
                x: 400,
                opacity: 1
            });

            // 通过 add 实例方法添加若干动画，所有动画都默认将以添加的序列依次执行
            // 也就是先执行上面的from-to，在执行add的动画内容
            demo.add([
              gsap.to(".demo", {
                  x: 500,
                  duration: 3
              }),
              gsap.to(".demo", {
                  y: 300,
                  duration: 2
              }),
              gsap.to(".demo", {
                  x: 800,
                  duration: 5
              })
          ]);

```
