---
title: HTML相关知识
date: 2020-07-18
sidebar: auto
tags: 
 - HTML
categories:
 - HTML/CSS
 - 面试
---


## DOCTYPE的作用是什么
- <!DOCTYPE>声明位于 HTML 文档中的第一行，处于 <html> 标签之前。告知浏览器的解析器用什么文档标准解析这个文档。一般指定了之后会以标准模式来进行文档解析，否则就以兼容模式进行解析。在标准模式下，浏览器的解析规则都是按照最新的标准进行解析的。而在兼容模式下，浏览器会以向后兼容的方式来模拟老式浏览器的行为，以保证一些老的网站的正确访问。
- DOCTYPE 不存在或格式不正确会导致文档以兼容模式呈现。
- 在 html5 之后不再需要指定 DTD 文档，因为 html5 以前的 html 文档都是基于 SGML 的，所以需要通过指定 DTD 来定义文 档中允许的属性以及一些规则。而 html5 不再基于 SGML 了，所以不再需要使用 DTD。

### 什么是DTD
DTD（ Document Type Definition 文档类型定义）是一组机器可读的规则，它们定义 XML 或 HTML 的特定版本中所有允许元素及它们的属性和层次关系的定义。在解析网页时，浏 览器将使用这些规则检查页面的有效性并且采取相应的措施。 DTD 是对 HTML 文档的声明，还会影响浏览器的渲染模式（工作模式）。

### 标准模式与兼容模式各有什么区别
标准模式的渲染方式和 JS 引擎的解析方式都是以该浏览器支持的最高标准运行。在兼容模式中，页面以宽松的向后兼容的方式显示，模拟老式浏览器的行为以防止站点无法工作。

## link 标签定义
- link 标签定义文档与外部资源的关系。 
- link 元素是空元素，它仅包含属性。 此元素只能存在于 head 部分，不过它可出现任何次数。
- link 标签中的 rel 属性定义了当前文档与被链接文档之间的关系。常见的 stylesheet 指的是定义一个外部加载的样式表。

## 页面导入样式@import和link有什么区别
- 从属关系区别。@import是css提供的语法规则，用于引入外部css样式表。link是html的语法，可以用于加载css，定义RSS、rel连接属性、引入网站图标等。
- 加载顺序区别。@import引入的css将在页面加载完毕之后被加载。Link会跟随着加载页面的顺序一起被加载。
- 兼容性的区别。@import是css2.1才有的语法，只有在IE5+才能识别。link 标签作为 HTML 元素，不存在兼容性问题。
- DOM 可控性区别。可以通过 JS 操作 DOM ，插入 link 标签来改变样式；由于 DOM 方法是基于文档的，无法使用 @import 的方式插入样式。

## 对浏览器内核的理解
> 分别有两个部分：渲染引擎和js引擎。

- 渲染引擎的职责就是渲染，即在浏览器窗口中显示所请求的内容。默认情况下，渲染引擎可以显示html、xml文档及图片，也可以借助插件显示其他类型的数据。例如使用pdf阅读插件可以查看pdf文件。
- js引擎用来解析和执行js来实现页面的动态效果。最开始渲染引擎和 JS 引擎并 没有区分的很明确，后来 JS 引擎越来越独立，内核就倾向于只指渲染引擎。

## 什么是文档的预解析
webkit、firefox都做了这个优化，当页面执行js脚本的时候，用另外一个线程去解析剩下的文档，并加载后面需要通过网络加载的资源。这样的方式可以使资源并行加载从而使整体加载速度更快。预解析不改变DOM树，最终的操作都由主解析进行。自己只解析外部资源的引用，比如脚本文件、图片、样式表等。

## 举例三种禁止浏览器缓存的头字段，并写出响应的设置值

Expires: 告诉浏览器把回送的资源缓存多长时间，-1 或 0 为不缓存。添加 Expires 头能有效的利用浏览器的缓存能力来改善页面的性能，能在后续的页面中有效
避免很多不必要的 http 请求。
Cache-control: no-cache Cache-control max-age=31536000
Pragma: no-cache


## 什么是重绘和回流？如何进行优化？
- 重绘： 重绘是元素节点的几何属性发生改变或是样式发生改变但是不影响到页面的布局，成为重绘，比如outline、visibility、 color、background-color等.由于浏览器必须验证dom树上其他节点元素的可见性，所以重绘的代价是高昂的。

- 回流：回流是元素节点的几何位置发生改变或是结构发生改变就称为回流。回流是影响浏览器性能的关键因素，因为其变化会涉及到局部乃至整个页面的布局更新。一个元素节点的回流有可能导致其所有子元素甚至是其后的父子节点都发生回流。

> 回流必定会发生重绘，重绘不一定会引发回流。

<b> 优化 </b>

现代浏览器大多都是通过队列机制来批量更新布局，浏览器会把修改操作放在 队列中，至少一个浏览器刷新（即 16.6ms）才会清空队列，但当你获取布局信 息的时候，队列中可能有会影响这些属性或方法返回值的操作，即使没有，浏览器也会强制清空队列，触发回流与重绘来确保返回正确的值。

<b> 主要包括以下属性或方法： </b>

1. offsetTop、offsetLeft、offsetWidth、offsetHeight 
2. scrollTop、scrollLeft、scrollWidth、scrollHeight 
3. clientTop、clientLeft、clientWidth、clientHeight 
4. width、height 
5. getComputedStyle() 
6. getBoundingClientRect() 
所以，我们应该避免频繁的使用上述的属性，他们都会强制渲染刷新队列。

<b> 减少重绘和回流： </b>

CSS方面:
1. 使用transform代替top等位移
2. 使用visibility代替display：none，前者只会引起重绘，后者会引起重绘和回流。
3. 避免使用table布局。因为一个table的改动可能会引起整个table重新渲染。
4. 尽可能在 DOM 树的最末端改变 class，回流是不可避免的，但可以减少其影 响。尽可能在 DOM 树的最末端改变 class，可以限制了回流的范围，使其影响 尽可能少的节点。
5. 避免设置多层内联样式。CSS 选择符从右往左匹配查找，避免节点层级过多。
6. 将动画效果应用到 position 属性为 absolute 或 fixed 的元素上，避免影响其他元素的布局，这样只是一个重绘，而不是回流，同时，控制动画速度可以选择 requestAnimationFrame。 避免使用 CSS 表达式，可能会引发回流。
7. 使用 css3 硬件加速，可以让 transform、opacity、 filters 这些动画不会引起回流重绘 。但是对于动画的其它属性，比如 background-color 这些，还是会引起回流重绘的，不过它还是可以提升这些动画 的性能

Javascript方面：
1. 避免频繁操作样式，不要多次修改Style属性，最好是将改动放在一个class内，并将需要的改动一次性的进行修改。
2. 避免直接操作修改dom元素，框架内可以使用clone，原生可以使用fragmment(documentFragment）先进行修改后再一次性地更换进文档中。
3. 避免频繁的读取会引发重绘和回流的属性，如果需要多次读取，可以先将他通过变量放入缓存中。
4. 对具有复杂动画的元素使用绝对定位，使它脱离文档流，否则会引起父元素 及后续元素频繁回流。